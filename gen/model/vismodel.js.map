{"version":3,"sources":["/projects/nodejs/botbuilder/fdevstart/src/../src/model/vismodel.ts"],"names":[],"mappings":";AAAA;;GAEG;;AAOH,yBAAyB;AAEzB,qDAAgD;AAEhD,mCAAmC;AAEnC,8CAA8C;AAE9C,4BAA4B;AAC5B,+BAA+B;AAE/B,6CAA6C;AAE7C,IAAI,QAAQ,GAAG,KAAK,CAAC,aAAa,CAAC,CAAC;AASnC,CAAC;AAEF,IAAI,WAAW,GAAG,OAAO,CAAC,aAAa,CAAC,CAAC;AAGzC,oBAA2B,CAAS;IAElC,MAAM,CAAC,CAAC,CAAC,OAAO,CAAC,KAAK,EAAE,MAAM,CAAC,CAAC,OAAO,CAAC,KAAK,EAAE,KAAK,CAAC;SAClD,OAAO,CAAC,KAAK,EAAE,KAAK,CAAC;SACrB,OAAO,CAAC,KAAK,EAAE,KAAK,CAAC;SACrB,OAAO,CAAC,KAAK,EAAE,KAAK,CAAC;SACrB,OAAO,CAAC,KAAK,EAAE,KAAK,CAAC;SACrB,OAAO,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC;IACzB,yBAAyB;IACzB,0BAA0B;AAC5B,CAAC;AAVD,gCAUC;AAAA,CAAC;AAGF,uBAA8B,SAAiB,EAAE,MAAc,EAAE,MAAkB;IACjF,IAAI,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,EAAE,GAAG,EAAE,CAAC,YAAY,CAAC,SAAS,GAAG,aAAa,CAAC,CAAC,CAAC;IACtE,IAAI,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,EAAE,GAAG,EAAE,CAAC,YAAY,CAAC,SAAS,GAAG,YAAY,CAAC,CAAC,CAAC;IAEtE,IAAI,IAAI,GAAG,GAAG,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,IAAI,OAAO,CAAC,KAAK,QAAQ,CAAC,CAAC;IAE3D,IAAI,cAAc,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,IAAI,GAAG,CAAC,UAAU,CAAC,CAAC,CAAC;IAErE,kDAAkD;IAClD,sEAAsE;IACtE,IAAI,YAAY,GAAG,cAAc,CAAC,GAAG,CAAC,GAAG,IAAI,GAAG,CAAC,IAAI,CAAC,CAAC;IAEvD,YAAY,GAAG,CAAC,CAAC,KAAK,CAAC,YAAY,EAAE,GAAG,CAAC,OAAO,CAAC,CAAA;IAGjD,IAAI,SAAS,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,IAAI,GAAG,CAAC,SAAS,CAAC,CAAC,GAAG,CAAC,GAAG,IAAI,GAAG,CAAC,IAAI,CAAC,CAAC;IACvE,oCAAoC;IACpC,IAAI,OAAO,GAAG,IAAI,CAAC;IACnB,4BAA4B;IAC5B,IAAI,KAAK,GAAG,WAAW,CAAC;QACtB,IAAI,IAAI,GAAG,IAAI,CAAC;QAChB,SAAS,CAAC;;;;;;;;;;;0CAWwB;aAAE,OAAO,CAAC,UAAU,KAAK;YACvD,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;QACvB,CAAC,CAAC,CAAC;QACL,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;QAClB,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC;IAC3B,CAAC,CAAC,CAAC;IACH,OAAO,CAAC,OAAO,CAAC,UAAU,CAAC,EAAE,KAAK;QAChC,CAAC,CAAC,EAAE,GAAG,KAAK,CAAC;IACf,CAAC,CAAC,CAAC;IACH,OAAO,CAAC,OAAO,CAAC,UAAU,MAAM;QAC9B,KAAK,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;IACvB,CAAC,CAAC,CAAC;IACH,IAAI,OAAO,GAAG,KAAK,CAAC;IAEpB,sBAAsB;IACtB,EAAE;IACF,IAAI,QAAQ,GAAG,KAAK,CAAC,MAAM,EAAE,CAAC;IAC9B,IAAI,OAAO,GAAG,GAAG,CAAC,OAAO,CAAC,GAAG,CAAC,OAAO;QACnC,IAAI,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,IAAI,GAAG,CAAC,IAAI,KAAK,OAAO,CAAC,CAAC;QACnD,EAAE,CAAA,CAAC,GAAG,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC,CAAC;YACpB,MAAM,IAAI,KAAK,CAAC,mCAAmC,GAAG,OAAO,CAAE,CAAC;QAClE,CAAC;QAAA,CAAC;QACF,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;IAChB,CAAC,CAAC,CAAC;IAEH,IAAI,WAAW,GAAG,OAAO,CAAC,GAAG,CAAC,GAAG,IAAI,GAAG,CAAC,IAAI,CAAC,CAAC;IAE/C,IAAI,KAAK,GAAG,uDAAuD,OAAO,CAAC,GAAG,CAAC,GAAG,IAAI,GAAG,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC;IAEjH,IAAI,IAAI,GAAG,oBAAoB,OAAO,CAAC,GAAG,CAAC,GAAG,IAAI,UAAU,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC;IACzF,kEAAkE;IAClE,sFAAsF;IAEtF,KAAK,IAAI,qDAAqD,OAAO,CAAC,GAAG,CAAC,GAAG,IAC3E,QAAQ,GAAG,CAAC,IAAI,SAAS,UAAU,CAAC,GAAG,CAAC,WAAW,IAAI,GAAG,CAAC,IAAI,CAAC,IAAI,CACrE,CAAC,IAAI,CAAC,GAAG,CAAC;SACJ,CAAC;IAER,IAAI,IAAI,2BAA2B,OAAO,CAAC,GAAG,CAAC,GAAG,IAChD,QAAQ,GAAG,CAAC,IAAI,SAAS,UAAU,CAAC,GAAG,CAAC,WAAW,IAAI,GAAG,CAAC,IAAI,CAAC,IAAI,CACrE,CAAC,IAAI,CAAC,GAAG,CAAC;SACJ,CAAC;IAGR,KAAK,IAAI,sDAAsD,OAAO,CAAC,GAAG,CAAC,GAAG,IAC5E,QAAQ,GAAG,CAAC,IAAI,OAAO,GAAG,CAAC,YAAY,IAAI,GAAG,GAAG,CAClD,CAAC,IAAI,CAAC,GAAG,CAAC;SACJ,CAAC;IAER,IAAI,IAAI,8BAA8B,OAAO,CAAC,GAAG,CAAC,GAAG,IACnD,QAAQ,GAAG,CAAC,IAAI,OAAO,GAAG,CAAC,YAAY,IAAI,GAAG,GAAG,CAClD,CAAC,IAAI,CAAC,GAAG,CAAC;SACJ,CAAC;IAIR,IAAI,WAAW,GAAG,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC;IAE3C,KAAK,IAAI,oBAAoB,GAAG,UAAU,CAAC,WAAW,CAAC,GAAG,OAAO,CAAC;IAClE,kEAAkE;IAGlE,IAAI,IAAI,gBAAgB,GAAG,WAAW,GAAI,GAAG,CAAC;IAE9C,gEAAgE;IAChE,IAAI,YAAY,GAAG,OAAO,CAAC,GAAG,CAAC,CAAC;QAC9B,IAAI,GAAG,GAAG,EAAE,CAAC;QACb,YAAY,CAAC,OAAO,CAAC,GAAG;YACtB,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;QACpB,CAAC,CAAC,CAAC;QACH,MAAM,CAAC,GAAG,CAAC;IACb,CAAC,CAAC,CAAC;IAEH,EAAE,CAAA,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;QACX,OAAO,CAAC,GAAG,CAAC,UAAU,GAAG,MAAM,CAAC,CAAC;QACjC,OAAO,CAAC,GAAG,CAAC,qBAAqB,GAAG,WAAW,CAAC,MAAM,CAAC,CAAA;QACvD,OAAO,CAAC,GAAG,CAAC,qBAAqB,GAAG,OAAO,CAAC,MAAM,GAAG,UAAU,CAAC,CAAC;QACjE,OAAO,CAAC,GAAG,CAAC,qBAAqB,GAAG,YAAY,CAAC,MAAM,GAAG,UAAU,CAAC,CAAC;QACtE,OAAO,CAAC,GAAG,CAAC,qBAAqB,GAAG,SAAS,CAAC,MAAM,GAAG,UAAU,CAAC,CAAC;QACnE,OAAO,CAAC,GAAG,CAAC,4BAA4B,EAAG,CAAC,CAAC,UAAU,CAAC,YAAY,EAAE,WAAW,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;QAC/F,OAAO,CAAC,GAAG,CAAC,0BAA0B,EAAG,CAAC,CAAC,UAAU,CAAC,YAAY,EAAE,SAAS,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;IAC7F,CAAC;IAED,KAAK,IAAI,WAAW,GAAG,IAAI,CAAC,SAAS,CAAC,YAAY,CAAC,GAAG,GAAG,CAAC;IAE1D,IAAI,IAAI,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC,YAAY,CAAC,GAAG,KAAK,CAAC;IAEzD,KAAK,IAAI;;;;GAIR,CAAC;IAEF,+CAA+C;IAC/C,EAAE,CAAC,aAAa,CAAC,MAAM,GAAG,YAAY,EAAE,IAAI,CAAC,CAAC;AAChD,CAAC;AA/HD,sCA+HC;AAMD;;;;;;;;;;EAUE;AAIF,4BAAmC,CAAiB,EAAE,QAAgB,EAAE,MAAc;IAEpF,IAAI,YAAY,GAAG,uBAAK,CAAC,qBAAqB,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC;IAC5D,CAAC,CAAC,IAAI,CAAC,YAAY,EAAE,MAAM,CAAC,CAAC;IAC7B,IAAI,GAAG,GAAG;QACR,YAAY,EAAE,YAAY;QAC1B,gBAAgB,EAAE,CAAC;QACnB,wBAAwB,EAAE,CAAC;QAC3B,SAAS,EAAE,CAAC;QACZ,iBAAiB,EAAE,CAAC;QACpB,sBAAsB,EAAE,CAAC;KACR,CAAC;IAEpB,IAAI,MAAM,GAAG,EAAE,CAAC;IAChB,IAAI,cAAc,GAAG,EAAE,CAAC;IACxB,IAAI,iBAAiB,GAAG,CAAC,CAAC;IAC1B,IAAI,cAAc,GAAG,CAAC,CAAC,OAAO,CAAC,OAAO,CAAC,UAAU,MAAM;QACrD,EAAE,CAAC,CAAC,MAAM,CAAC,OAAO,KAAK,MAAM,CAAC,CAAC,CAAC;YAC9B,GAAG,CAAC,sBAAsB,IAAI,CAAC,CAAC;QAClC,CAAC;QACD,EAAE,CAAC,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;YACrB,IAAI,KAAK,GAAG,MAAM,CAAC,QAAQ,CAAC,CAAC;YAC7B,EAAE,CAAC,CAAC,MAAM,CAAC,OAAO,KAAK,MAAM,CAAC,CAAC,CAAC;gBAC9B,cAAc,CAAC,KAAK,CAAC,GAAG,CAAC,cAAc,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC;gBACzD,GAAG,CAAC,iBAAiB,IAAI,CAAC,CAAC;YAC7B,CAAC;YACD,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,MAAM,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC;YACzC,GAAG,CAAC,SAAS,IAAI,CAAC,CAAC;QACrB,CAAC;IACH,CAAC,CAAC,CAAC;IACH,GAAG,CAAC,gBAAgB,GAAG,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,MAAM,CAAC;IAClD,GAAG,CAAC,wBAAwB,GAAG,MAAM,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,MAAM,CAAC;IAClE,MAAM,CAAC,GAAG,CAAC;AACb,CAAC;AAjCD,gDAiCC;AAED,qBAA4B,MAAc,EAAE,CAAiB;IAC3D,uBAAuB;IACvB,IAAI,GAAG,GAAG;;;;;OAKL,MAAM;GACV,CAAC;IACF,yBAAyB;IACzB,GAAG,IAAI,qDAAqD,CAAA;IAC5D,IAAI,IAAI,GAAG,uBAAK,CAAC,sBAAsB,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC;IAEnD,IAAI,eAAe,GAAG,EAAE,CAAC;IACzB,IAAI,YAAY,GAAG,EAAE,CAAC;IACtB,IAAI,CAAC,OAAO,CAAC,UAAU,GAAG;QACxB,IAAI,SAAS,GAAG,kBAAkB,CAAC,CAAC,EAAE,GAAG,EAAE,MAAM,CAAC,CAAC;QACnD,eAAe,CAAC,GAAG,CAAC,GAAG,SAAS,CAAC;QACjC,YAAY,GAAG,CAAC,CAAC,KAAK,CAAC,YAAY,EAAE,eAAe,CAAC,GAAG,CAAC,CAAC,YAAY,CAAC,CAAC;QACxE,GAAG,IAAI,IAAI,GAAG,eAAe,GAAG,MAAM,SAAS,CAAC,wBAAwB,cAAc,SAAS,CAAC,iBAAiB,GAAG,CAAC;QACrH,EAAE,CAAC,CAAC,SAAS,CAAC,iBAAiB,KAAK,SAAS,CAAC,SAAS,CAAC,CAAC,CAAC;YACxD,GAAG,IAAI,MAAM,SAAS,CAAC,gBAAgB,GAAG,SAAS,CAAC,wBAAwB,oBAAoB,SAAS,CAAC,SAAS,GAAG,SAAS,CAAC,iBAAiB,gBAAgB,CAAC;QACpK,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,GAAG,IAAI,GAAG,CAAC;QACb,CAAC;QACD,GAAG,IAAI,OAAO,CAAC;IACjB,CAAC,CAAC,CAAC;IAEH,2BAA2B;IAC3B,0BAA0B;IAC1B,GAAG,IAAI,uCAAuC,CAAA;IAC9C,YAAY,CAAC,OAAO,CAAC,UAAU,WAAW;QACxC,GAAG,IAAI,IAAI,WAAW,MAAM,CAAC;IAC/B,CAAC,CAAC,CAAC;IACH,4BAA4B;IAC5B,IAAI,SAAS,GAAG,CAAC,CAAC,OAAO,CAAC,MAAM,CAAC,UAAU,IAAI,EAAE,KAAK;QACpD,MAAM,CAAC,IAAI,GAAG,CAAC,CAAC,KAAK,CAAC,OAAO,KAAK,MAAM,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;IACrD,CAAC,EAAE,CAAC,CAAC,CAAC;IACN,GAAG,IAAI,yBAAyB,CAAA;IAChC,GAAG,IAAI,2BAA2B,MAAM,MAAM,SAAS,QAAQ,CAAC;IAEhE,GAAG,IAAI,oCAAoC,SAAS,SAAS,CAAC;IAE9D,GAAG,IAAI,wCAAwC,CAAC;IAChD,IAAI,CAAC,OAAO,CAAC,UAAU,GAAG;QACxB,GAAG,IAAI,KAAK,GAAG,SAAS,MAAM,MAAM,CAAC;IACvC,CAAC,CAAC,CAAA;IAGF,GAAG,IAAI,yCAAyC,CAAC;IACjD,IAAI,CAAC,OAAO,CAAC,UAAU,GAAG;QACxB,IAAI,GAAG,GAAG,eAAe,CAAC,GAAG,CAAC,CAAC;QAC/B,GAAG,IAAI,KAAK,GAAG,kBAAkB,CAAC;IACpC,CAAC,CAAC,CAAA;IAGF,uBAAuB;IACvB,IAAI,CAAC,OAAO,CAAC,UAAU,GAAG;IAG1B,CAAC,CAAC,CAAA;IAEF;;;;;;;;;;;MAWE;IACF,GAAG,IAAI,KAAK,CAAC;IACb,MAAM,CAAC,GAAG,CAAC;AACb,CAAC;AA5ED,kCA4EC;AACD;;;;;;;;EAQE;AAEF,mBAAmB,MAAc;IAC/B,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,KAAK,EAC3B;;yBAEqB,CACtB,CAAC;IACF,MAAM,CAAC,MAAM,CAAC;AAChB,CAAC;AAKD;;GAEG;AACH,mBAA0B,MAAc,EAAE,CAAiB;IACzD,uBAAuB;IAEvB,IAAI,IAAI,GAAG,uBAAK,CAAC,sBAAsB,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC;IACnD,IAAI,GAAG,uBAAK,CAAC,0BAA0B,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,UAAU,IAAI,EAAE,EAAE,IAAI,CAAC,CAAC;IACtF,+BAA+B;IAC/B,IAAI,OAAO,GAAG,QAAQ,CAAC,wBAAwB,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,MAAM,EAAE,CAAC,CAAC,CAAC;IACpE,IAAI,SAAS,GAAG,kBAAkB,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC;IAEvD,IAAI,WAAW,GAAG,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,WAAW,IAAI,EAAE,CAAC;IAC1D,WAAW,GAAG,SAAS,CAAC,WAAW,CAAC,CAAC;IACrC,IAAI,GAAG,GAAG;;;;;;;;;;;;mHAYuG,MAAM;;;;;;;;;;;eAW1G,MAAM;qBACA,SAAS,CAAC,sBAAsB;;SAE5C,WAAW;;;;;;;;;;;;;;;;CAgBnB,CAAC;IAEA,IAAI,eAAe,GAAG,EAAE,CAAC;IACzB,IAAI,YAAY,GAAG,EAAE,CAAC;IACtB,IAAI,WAAW,GAAG,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,UAAU,IAAI,EAAE,CAAC;IACzD,IAAI,CAAC,OAAO,CAAC,UAAU,GAAG;QACxB,IAAI,OAAO,GAAG,QAAQ,CAAC,wBAAwB,CAAC,GAAG,EAAE,MAAM,EAAE,CAAC,CAAC,CAAC;QAChE,uCAAuC;QACvC,IAAI,SAAS,GAAG,kBAAkB,CAAC,CAAC,EAAE,GAAG,EAAE,MAAM,CAAC,CAAC;QACnD,eAAe,CAAC,GAAG,CAAC,GAAG,SAAS,CAAC;QACjC,YAAY,GAAG,CAAC,CAAC,KAAK,CAAC,YAAY,EAAE,eAAe,CAAC,GAAG,CAAC,CAAC,YAAY,CAAC,CAAC;QACxE;;;;;;;;UAQE;QACF,qDAAqD;QACrD,EAAE,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;YAE1C,IAAI,cAAc,GAAG,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,YAAY,IAAI,OAAO,CAAC,YAAY,CAAC,QAAQ,IAAI,OAAO,CAAC,YAAY,CAAC,QAAQ,IAAI,EAAE,CAAC,IAAI,QAAQ,CAAC;YAEnJ,GAAG,IAAI;;oBAEO,GAAG;eACR,OAAO,CAAC,cAAc,uBAAuB,OAAO,CAAC,WAAW;;;;qBAI1D,cAAc;;qBAEd,SAAS,CAAC,OAAO,CAAC,YAAY,IAAI,OAAO,CAAC,YAAY,CAAC,WAAW,IAAI,EAAE,CAAC;;qBAEzE,SAAS,CAAC,OAAO,CAAC,YAAY,CAAC;OAC7C,CAAC;QACJ,CAAC;IAEH,CAAC,CAAC,CAAC;IAEH,IAAI,SAAS,GAAG,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,UAAU,CAAC,CAAC,MAAM,CAAC;IACnF,IAAI,mBAAmB,GAAG,CAAC,CAAC,UAAU,CAAC,IAAI,EAAE,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC;IAC5F,EAAE,CAAC,CAAC,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;QACpB,GAAG,IAAI;cACG,SAAS;QACf,IAAI,CAAC,cAAc,CAAC,mBAAmB,CAAC;QACxC,CAAA;IAEN,CAAC;IACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;MAkCE;IACF;;;;;;;;;;;MAWE;IACF,GAAG,IAAI;;;;;;;;;CASR,CAAC;IACA,MAAM,CAAC,GAAG,CAAC;AACb,CAAC;AAlKD,8BAkKC;AAID,iDAAqC;AAGrC,iBAAiB,GAAW;IAC1B,oBAAI,CAAC,GAAG,EAAE,UAAU,KAAK,EAAE,MAAM,EAAE,MAAM;QACvC,EAAE,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;YACV,OAAO,CAAC,KAAK,CAAC,eAAe,KAAK,EAAE,CAAC,CAAA;YACrC,MAAM,CAAA;QACR,CAAC;QACD,OAAO,CAAC,GAAG,CAAC,WAAW,MAAM,EAAE,CAAC,CAAA;QAChC,OAAO,CAAC,GAAG,CAAC,WAAW,MAAM,EAAE,CAAC,CAAA;IAClC,CAAC,CAAC,CAAA;AACJ,CAAC;AAAA,CAAC;AAEF,mBAA0B,CAAiB,EAAE,SAAiB;IAC5D,CAAC,CAAC,OAAO,CAAC,OAAO,CAAC,UAAU,OAAO;QACjC,IAAI,CAAC,GAAG,WAAW,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC;QAChC,IAAI,OAAO,GAAG,SAAS,GAAG,GAAG,GAAG,OAAO,CAAC,OAAO,CAAC,IAAI,EAAE,GAAG,CAAC,GAAG,KAAK,CAAC;QACnE,EAAE,CAAC,aAAa,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC;QAC7B,EAAE,CAAC,CAAC,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC,CAAC;YACzB,OAAO,CAAC,GAAG,CAAC,gBAAgB,GAAG,OAAO,CAAC,CAAC;YACxC,OAAO,CAAC,OAAO,CAAC,GAAG,CAAC,QAAQ,GAAG,aAAa,GAAG,OAAO,CAAC,CAAC;QAC1D,CAAC;IACH,CAAC,CAAC,CAAC;AACL,CAAC;AAVD,8BAUC;AAED,mBAA0B,CAAiB,EAAE,SAAiB;IAC5D,CAAC,CAAC,OAAO,CAAC,OAAO,CAAC,UAAU,OAAO;QACjC,IAAI,CAAC,GAAG,SAAS,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC;QAC9B,IAAI,OAAO,GAAG,SAAS,GAAG,GAAG,GAAG,OAAO,CAAC,OAAO,CAAC,IAAI,EAAE,GAAG,CAAC,GAAG,OAAO,CAAC;QACrE,QAAQ,CAAC,gBAAgB,GAAG,OAAO,CAAC,CAAC;QACrC,EAAE,CAAC,aAAa,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC;IAC/B,CAAC,CAAC,CAAC;AACL,CAAC;AAPD,8BAOC","file":"model/vismodel.js","sourcesContent":["/**\n * visualize a model and calculate some statistics\n */\n\n\n\nimport * as IMatch from '../match/ifmatch';\n\n\nimport * as fs from 'fs';\n\nimport {Model as Model}  from 'fdevsta_monmove';\n\nimport * as Util from 'abot_utils';\n\nimport * as Describe from '../match/describe';\n\nimport * as _ from 'lodash';\nimport * as debug from 'debug';\n\n//import * as elasticlunr from 'elasticlunr';\n\nvar debuglog = debug('vismodel.ts');\n\ninterface CategoryRecord {\n  otherdomains: string[],\n  nrDistinctValues: number,\n  nrDistinctValuesInDomain: number,\n  nrRecords: number,\n  nrRecordsInDomain: number,\n  nrTotalRecordsInDomain: number\n};\n\nvar elasticlunr = require('elasticlunr');\n\n\nexport function JSONEscape(s: string) {\n\n  return s.replace(/\\\\/g, \"\\\\\\\\\").replace(/\\n/g, \"\\\\n\")\n    .replace(/\\'/g, \"\\\\'\")\n    .replace(/\\\"/g, '\\\\\"')\n    .replace(/\\&/g, \"\\\\&\")\n    .replace(/\\r/g, \"\\\\r\")\n    .replace(/\\t/g, \"\\\\t\");\n  // .replace(/\\b/g, \"\\\\b\")\n  // .replace(/\\f/g, \"\\\\f\");\n};\n\n\nexport function makeLunrIndex(modelpath: string, output: string, silent ? : boolean) {\n  var mdl = JSON.parse('' + fs.readFileSync(modelpath + '.model.json'));\n  var data = JSON.parse('' + fs.readFileSync(modelpath + '.data.json'));\n\n  var cats = mdl.category.filter(a => typeof a !== 'string');\n\n  var qbeDataObjects = cats.filter(cat => (cat.QBE || cat.QBEInclude));\n\n  //console.log(\"here cats\" + JSON.stringify(cats));\n  //console.log(\"\\nhere data objects\" + JSON.stringify(qbeDataObjects));\n  var qbeDataNames = qbeDataObjects.map(cat => cat.name);\n\n  qbeDataNames = _.union(qbeDataNames, mdl.columns)\n\n\n  var LUNRIndex = cats.filter(cat => cat.LUNRIndex).map(cat => cat.name);\n  //var elasticlunr = require('lunr');\n  var bomdata = data;\n  // index all LUNR properties\n  var index = elasticlunr(function () {\n    var that = this;\n    LUNRIndex /*\n            [\"appId\",\n            \"AppKey\",\n            \"AppName\",\n                \"ApplicationComponent\",\n                \"RoleName\",\n                \"ApplicationType\",\n                \"BSPName\",\n                \"BSPApplicationURL\",\n                \"releaseName\",\n                \"BusinessCatalog\",\n                \"TechnicalCatalog\"] */ .forEach(function (field) {\n        that.addField(field);\n      });\n    this.setRef('id');\n    this.saveDocument(false);\n  });\n  bomdata.forEach(function (o, index) {\n    o.id = index;\n  });\n  bomdata.forEach(function (record) {\n    index.addDoc(record);\n  });\n  var elastic = index;\n\n  // dump the lunr index\n  //\n  var theIndex = index.toJSON();\n  var columns = mdl.columns.map(colname =>  {\n    var res = cats.filter(cat => cat.name === colname);\n    if(res.length !== 1) {\n      throw new Error(\"undefined or non-object column : \" + colname );\n    };\n    return res[0];\n  });\n\n  var columnNames = columns.map(col => col.name);\n\n  var jsonp = `var mdldata = {};\\n//columns \\n mdldata.columns = [\"${columns.map(col => col.name).join('\",\"')}\"];`;\n\n  var json = `{ \"columns\"  : [\"${columns.map(col => JSONEscape(col.name)).join('\",\"')}\"],`;\n  // jsonp += `\\n mdldata.fulldata = ${JSON.stringify(bomdata)};\\n`;\n  //jsonp += `\\n//columns info \\n mdldata.lunrcolumns = [\"{${LUNRIndex.join('\",\"')}\"];`;\n\n  jsonp += `\\n//columns info \\n mdldata.columnsDescription = {${columns.map(col =>\n    ` \\n \"${col.name}\" :  \"${JSONEscape(col.description || col.name)}\" `\n  ).join(',')}\n      };`;\n\n  json += `\"columnsDescription\" : {${columns.map(col =>\n    ` \\n \"${col.name}\" :  \"${JSONEscape(col.description || col.name)}\" `\n  ).join(',')}\n      },`;\n\n\n  jsonp += `\\n//columns info \\n mdldata.columnsDefaultWidth = {${columns.map(col =>\n    ` \\n \"${col.name}\" : ${col.defaultWidth || 150} `\n  ).join(',')}\n      };`;\n\n  json += `\\n\"columnsDefaultWidth\" : {${columns.map(col =>\n    ` \\n \"${col.name}\" : ${col.defaultWidth || 150} `\n  ).join(',')}\n      },`;\n\n\n\n  var theIndexStr = JSON.stringify(theIndex);\n\n  jsonp += \"\\nvar serIndex =\\\"\" + JSONEscape(theIndexStr) + \"\\\";\\n\";\n  // jsonp += \"\\nvar serIndex =\" + JSON.stringify(theIndex) + \";\\n\";\n\n\n  json += '\\n\"serIndex\" :' + theIndexStr +  ',';\n\n  //console.log(\"here all names \" + JSON.stringify(qbeDataNames));\n  var cleanseddata = bomdata.map(o => {\n    var res = {};\n    qbeDataNames.forEach(key => {\n      res[key] = o[key];\n    });\n    return res;\n  });\n\n  if(!silent) {\n    console.log(\"dumping \" + output);\n    console.log(\"length of index str\" + theIndexStr.length)\n    console.log(\"available          \" + columns.length + \" columns\");\n    console.log(\"returning as data  \" + qbeDataNames.length + \" columns\");\n    console.log(\"indexing           \" + LUNRIndex.length + \" columns\");\n    console.log('returned but not available' , _.difference(qbeDataNames, columnNames).join(\", \"));\n    console.log('returned but not indexed' , _.difference(qbeDataNames, LUNRIndex).join(\", \"));\n  }\n\n  jsonp += \"var data=\" + JSON.stringify(cleanseddata) + \";\";\n\n  json += '\"data\":' + JSON.stringify(cleanseddata) + \"\\n}\";\n\n  jsonp += `\n\n           // var elastic = elasticlunr.Index.load(serIndex);\n\n  `;\n\n  //fs.writeFileSync(output + \".lunr.js\", jsonp);\n  fs.writeFileSync(output + \".lunr.json\", json);\n}\n\n\n\n\n\n/*\n\n  var index = elastilunr.Index.load(obj);\n\n\n}\n\n \"QBE\" : false,\n      \"QBEInclude\" : true,\n      \"LUNRIndex\": false\n*/\n\n\n\nexport function calcCategoryRecord(m: IMatch.IModels, category: string, domain: string): CategoryRecord {\n\n  var otherdomains = Model.getDomainsForCategory(m, category);\n  _.pull(otherdomains, domain);\n  var res = {\n    otherdomains: otherdomains,\n    nrDistinctValues: 0,\n    nrDistinctValuesInDomain: 0,\n    nrRecords: 0,\n    nrRecordsInDomain: 0,\n    nrTotalRecordsInDomain: 0,\n  } as CategoryRecord;\n\n  var values = [];\n  var valuesInDomain = [];\n  var nrRecordsInDomain = 0;\n  var distinctValues = m.records.forEach(function (oEntry) {\n    if (oEntry._domain === domain) {\n      res.nrTotalRecordsInDomain += 1;\n    }\n    if (oEntry[category]) {\n      var value = oEntry[category];\n      if (oEntry._domain === domain) {\n        valuesInDomain[value] = (valuesInDomain[value] || 0) + 1;\n        res.nrRecordsInDomain += 1;\n      }\n      values[value] = (values[value] || 0) + 1;\n      res.nrRecords += 1;\n    }\n  });\n  res.nrDistinctValues = Object.keys(values).length;\n  res.nrDistinctValuesInDomain = Object.keys(valuesInDomain).length;\n  return res;\n}\n\nexport function graphDomain(domain: string, m: IMatch.IModels) {\n  // draw a model domains\n  var res = `\n    digraph sdsu {\n\tsize=\"36,36\";\n   rankdir=LR\n\tnode [color=yellow, style=filled];\n    \"${domain}\"\n  `;\n  // add all category nodes\n  res += `node [shape=record, color=yellow, style=filled];\\n `\n  var cats = Model.getCategoriesForDomain(m, domain);\n\n  var categoryResults = {};\n  var otherdomains = [];\n  cats.forEach(function (cat) {\n    var catResult = calcCategoryRecord(m, cat, domain);\n    categoryResults[cat] = catResult;\n    otherdomains = _.union(otherdomains, categoryResults[cat].otherDomains);\n    res += `\"${cat}\" [label=\"{ ${cat} | ${catResult.nrDistinctValuesInDomain} Values in ${catResult.nrRecordsInDomain} `;\n    if (catResult.nrRecordsInDomain !== catResult.nrRecords) {\n      res += `|  ${catResult.nrDistinctValues - catResult.nrDistinctValuesInDomain} other values in ${catResult.nrRecords - catResult.nrRecordsInDomain} other records`;\n    } else {\n      res += ` `;\n    }\n    res += `}\"]\\n`;\n  });\n\n  // calculate other domains.\n  // draw \"other categories\"\n  res += `node [color=purple, style=filled]; \\n`\n  otherdomains.forEach(function (otherdomain) {\n    res += `\"${otherdomain}\" \\n`;\n  });\n  // count records in domain :\n  var nrRecords = m.records.reduce(function (prev, entry) {\n    return prev + ((entry._domain === domain) ? 1 : 0);\n  }, 0);\n  res += `node [shape=record]; \\n`\n  res += ` \"record\" [label=\"{<f0> ${domain} | ${nrRecords}}\"] \\n`;\n\n  res += ` \"r_other\" [label=\"{<f0> other | ${nrRecords}}\"] \\n `;\n\n  res += `# relation from categories to domain\\n`;\n  cats.forEach(function (cat) {\n    res += ` \"${cat}\" -> \"${domain}\" \\n`;\n  })\n\n\n  res += `# relation from categories to records\\n`;\n  cats.forEach(function (cat) {\n    var rec = categoryResults[cat];\n    res += ` \"${cat}\" -> \"record\" \\n`;\n  })\n\n\n  //other domains to this\n  cats.forEach(function (cat) {\n\n\n  })\n\n  /*\n  cats fo\n    digraph sdsu {\n\tsize=\"36,36\";\n\tnode [color=yellow, style=filled];\n\tFLPD FLP \"BOM Editor\", \"WIKIURL\" \"UI5 Documentation\", \"UI5 Example\", \"STARTTA\"\n\tBCP\n\tnode [color=grey, style=filled];\n\tnode [fontname=\"Verdana\", size=\"30,30\"];\n\tnode [color=grey, style=filled];\n\tgraph [ fontname = \"Arial\",\n  */\n  res += `}\\n`;\n  return res;\n}\n/*\n    categoryDesc : theModel.full.domain[filterdomain].categories[category],\n    distinct : distinct,\n    delta : delta,\n    presentRecords : recordCount.presentrecords,\n    percPresent : percent,\n    sampleValues : valuesList\n  }\n*/\n\nfunction replaceBr(string: string): string {\n  string = string.replace(/\\n/g,\n    `\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tbr\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t| `\n  );\n  return string;\n}\n\n\n\n\n/**\n * generate a textual representation of a domain\n */\nexport function tabDomain(domain: string, m: IMatch.IModels) {\n  // draw a model domains\n\n  var cats = Model.getCategoriesForDomain(m, domain);\n  cats = Model.sortCategoriesByImportance(m.full.domain[domain].categories || {}, cats);\n  //console.log(cats.join(\"\\n\"));\n  var catdesc = Describe.getCategoryStatsInDomain(cats[0], domain, m);\n  var catResult = calcCategoryRecord(m, cats[0], domain);\n\n  var domainDescr = m.full.domain[domain].description || \"\";\n  domainDescr = replaceBr(domainDescr);\n  var res = `\n\n// preset form values if we receive a userdata object //\n- user = user\n\nextends ../layout_p\n\nblock content\n\n\tnav.navbar.navbar-default.navbar-fixed-top\n\t\t.container\n\t\t\t.navbar-header\n\t\t\t\t.navbar-brand(style='bgcolor:orange;color:darkblue;font-family:Arial Black;font-size:15.118px') wosap domain ${domain}\n\t\t\tul.nav.navbar-nav.navbar-right #{uid}\n\t\t\t\tli\n\t\t\t\t\t.navbar-btn#btn-logout.btn.btn-default(onclick=\"location.href='/home'\")\n\t\t\t\t\t\t| back to home\n\n\tp  &nbsp;\n\tp &nbsp;\n\tp\n\n\tdiv.well\n\t\th3 domain \"${domain}\"\n\t\t\tspan.pull-right ${catResult.nrTotalRecordsInDomain} records\n\t\tp\n\t\tspan ${domainDescr}\n\n\t\ttable.table.table-condensed.table-striped\n\t\t\tthead\n\t\t\t\ttr\n\t\t\t\t\tth category\n\t\t\t\t\tth(style=\"width:10%\") count\n\t\t\t\t\tth\n\t\t\t\t\t\ttable\n\t\t\t\t\t\t\ttr\n\t\t\t\t\t\t\t\ttd synonyms\n\t\t\t\t\t\t\ttr\n\t\t\t\t\t\t\t\ttd description\n\t\t\t\t\t\t\ttr\n\t\t\t\t\t\t\t\ttd example values\n\t\t\ttbody\n`;\n\n  var categoryResults = {};\n  var otherdomains = [];\n  var categoryMap = m.full.domain[domain].categories || {};\n  cats.forEach(function (cat) {\n    var catdesc = Describe.getCategoryStatsInDomain(cat, domain, m);\n    //console.log(JSON.stringify(catdesc));\n    var catResult = calcCategoryRecord(m, cat, domain);\n    categoryResults[cat] = catResult;\n    otherdomains = _.union(otherdomains, categoryResults[cat].otherDomains);\n    /*\n        res += `\"${cat}\" [label=\"{ ${cat} | ${catResult.nrDistinctValuesInDomain} Values in ${catResult.nrRecordsInDomain} `;\n        if(catResult.nrRecordsInDomain !== catResult.nrRecords) {\n          res +=  `|  ${catResult.nrDistinctValues - catResult.nrDistinctValuesInDomain} other values in ${catResult.nrRecords - catResult.nrRecordsInDomain} other records`;\n        } else {\n          res += ` `;\n        }\n        res += `}\"]\\n`;\n    */\n    //console.log(JSON.stringify(m.full.domain[domain]));\n    if (m.full.domain[domain].categories[cat]) {\n\n      var synonymsString = Util.listToCommaAnd(catdesc.categoryDesc && catdesc.categoryDesc.synonyms && catdesc.categoryDesc.synonyms || []) || \"&nbsp;\";\n\n      res += `\n\t\t\ttr\n\t\t\t\t\ttd.cat_count ${cat}\n\\t\\t\\t\\t\\ttd ${catdesc.presentRecords} distinct values in ${catdesc.percPresent}% of records\n\\t\\t\\t\\t\\ttd\n\\t\\t\\t\\t\\t\\ttable\n\\t\\t\\t\\t\\t\\t\\ttr.cat_synonyms\n\\t\\t\\t\\t\\t\\t\\t\\ttd ${synonymsString}\n\\t\\t\\t\\t\\t\\t\\ttr.cat_description\n\\t\\t\\t\\t\\t\\t\\t\\ttd ${replaceBr(catdesc.categoryDesc && catdesc.categoryDesc.description || \"\")}\n\\t\\t\\t\\t\\t\\t\\ttr.cat_samplevalues\n\\t\\t\\t\\t\\t\\t\\t\\ttd ${replaceBr(catdesc.sampleValues)}\n      `;\n    }\n\n  });\n\n  var othercats = cats.length - Object.keys(m.full.domain[domain].categories).length;\n  var remainingCategories = _.difference(cats, Object.keys(m.full.domain[domain].categories));\n  if ((othercats) > 0) {\n    res += `\n\\t\\tp   and ${othercats} other categories\n\\t\\t| ${Util.listToCommaAnd(remainingCategories)}\n       `\n\n  }\n  /*\n    // calculate other domains.\n    // draw \"other categories\"\n    res += `node [color=purple, style=filled]; \\n`\n    otherdomains.forEach(function(otherdomain) {\n      res += `\"${otherdomain}\" \\n`;\n    });\n    // count records in domain :\n    var nrRecords = m.records.reduce(function(prev,entry) {\n    return prev + ((entry._domain === domain) ? 1 : 0);\n    },0);\n    res += `node [shape=record]; \\n`\n    res += ` \"record\" [label=\"{<f0> ${domain} | ${nrRecords}}\"] \\n`;\n\n    res += ` \"r_other\" [label=\"{<f0> other | ${nrRecords}}\"] \\n `;\n\n    res += `# relation from categories to domain\\n`;\n    cats.forEach(function(cat) {\n      res += ` \"${cat}\" -> \"${domain}\" \\n`;\n    })\n\n\n    res += `# relation from categories to records\\n`;\n    cats.forEach(function(cat) {\n      var rec = categoryResults[cat];\n      res += ` \"${cat}\" -> \"record\" \\n`;\n    })\n\n\n    //other domains to this\n    cats.forEach(function(cat) {\n\n\n    })\n  */\n  /*\n  cats fo\n    digraph sdsu {\n\tsize=\"36,36\";\n\tnode [color=yellow, style=filled];\n\tFLPD FLP \"BOM Editor\", \"WIKIURL\" \"UI5 Documentation\", \"UI5 Example\", \"STARTTA\"\n\tBCP\n\tnode [color=grey, style=filled];\n\tnode [fontname=\"Verdana\", size=\"30,30\"];\n\tnode [color=grey, style=filled];\n\tgraph [ fontname = \"Arial\",\n  */\n  res += `\n\t\th3 Version\n\t\t\ta.small(href=\"/whatsnew\")\n\n\nblock scripts\n\tscript(src='/vendor/jquery-2.2.3.min.js')\n\tscript(src='/vendor/bootstrap.min.js')\n\tscript(src='/js/views/settings.js')\n`;\n  return res;\n}\n\n\n\nimport { exec } from 'child_process';\n\n\nfunction execCmd(cmd: string) {\n  exec(cmd, function (error, stdout, stderr) {\n    if (error) {\n      console.error(`exec error: ${error}`)\n      return\n    }\n    console.log(`stdout: ${stdout}`)\n    console.log(`stderr: ${stderr}`)\n  })\n};\n\nexport function visModels(m: IMatch.IModels, folderOut: string) {\n  m.domains.forEach(function (sDomain) {\n    var s = graphDomain(sDomain, m);\n    var fnGraph = folderOut + \"/\" + sDomain.replace(/ /g, '_') + \".gv\";\n    fs.writeFileSync(fnGraph, s);\n    if (process.env.GRAPHVIZ) {\n      console.log(\"here the file \" + fnGraph);\n      execCmd(process.env.GRAPHVIZ + \" -Tjpeg -O \" + fnGraph);\n    }\n  });\n}\n\nexport function tabModels(m: IMatch.IModels, folderOut: string) {\n  m.domains.forEach(function (sDomain) {\n    var s = tabDomain(sDomain, m);\n    var fnGraph = folderOut + \"/\" + sDomain.replace(/ /g, '_') + \".jade\";\n    debuglog(\"here the file \" + fnGraph);\n    fs.writeFileSync(fnGraph, s);\n  });\n}\n"],"sourceRoot":"ABC"}